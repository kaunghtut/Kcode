<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Link Decoder - ·ÄÄ·Äº·Ä±·Ä¨·Ä∫·ÄÑ·Äº·Ä¨ Link ·Äñ·Äº·Ä±·Äõ·Äæ·ÄÑ·Ä∫·Ä∏·ÄÄ·Ä≠·Äõ·Ä≠·Äö·Ä¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #4a5568;
            font-size: 1.1rem;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #2d3748;
            font-weight: 600;
            font-size: 1rem;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f7fafc;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .decode-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .decode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .decode-btn:active {
            transform: translateY(0);
        }

        .decode-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .result-section {
            margin-top: 30px;
            padding: 25px;
            background: #f7fafc;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            display: none;
        }

        .result-section.show {
            display: block;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-item {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .result-item:last-child {
            margin-bottom: 0;
        }

        .result-label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .result-label .icon {
            margin-right: 8px;
            font-size: 1.1rem;
        }

        .result-link {
            word-break: break-all;
            padding: 10px;
            background: #edf2f7;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #2d3748;
            border: 1px solid #cbd5e0;
        }

        .copy-btn {
            margin-top: 10px;
            padding: 8px 16px;
            background: #48bb78;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .copy-btn:hover {
            background: #38a169;
        }

        .copy-btn.copied {
            background: #38a169;
        }

        .error-message {
            background: #fed7d7;
            color: #c53030;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #e53e3e;
            margin-top: 20px;
            display: none;
        }

        .error-message.show {
            display: block;
            animation: slideDown 0.5s ease;
        }

        .supported-sites {
            margin-top: 40px;
            padding: 25px;
            background: #e6fffa;
            border-radius: 12px;
            border-left: 4px solid #38b2ac;
        }

        .supported-sites h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .sites-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .site-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            font-weight: 500;
            color: #2d3748;
            text-align: center;
            border: 1px solid #b2f5ea;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .sites-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé¨ Video Link Decoder</h1>
            <p>·ÄÄ·Äº·Ä±·Ä¨·Ä∫·ÄÑ·Äº·Ä¨ link ·Äô·Äª·Ä¨·Ä∏·Äô·Äæ ·Äô·Ä∞·Äõ·ÄÑ·Ä∫·Ä∏ video link ·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Äë·ÄØ·Äê·Ä∫·Äö·Ä∞·Äï·Ä´</p>
        </div>

        <div class="input-section">
            <div class="input-group">
                <label for="videoUrl">üîó Video URL ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äï·Ä´:</label>
                <input type="url" id="videoUrl" placeholder="https://example.com/video-link-with-ads" />
            </div>
            
            <button class="decode-btn" onclick="decodeVideoLink()">
                <span id="btnText">üîç Link ·Äñ·Äº·Ä±·Äõ·Äæ·ÄÑ·Ä∫·Ä∏·Äõ·Äî·Ä∫</span>
                <span id="loadingSpinner" class="loading" style="display: none;"></span>
            </button>
        </div>

        <div class="result-section" id="resultSection">
            <h3 style="color: #2d3748; margin-bottom: 20px;">üìã ·Äõ·Äú·Äí·Ä∫·Äô·Äª·Ä¨·Ä∏:</h3>
            <div id="resultsContainer"></div>
        </div>

        <div class="error-message" id="errorMessage"></div>

        <div class="supported-sites">
            <h3>üåü ·Ä°·Äë·Ä±·Ä¨·ÄÄ·Ä∫·Ä°·Äï·Ä∂·Ä∑·Äï·Ä±·Ä∏·Äë·Ä¨·Ä∏·Äû·Ä±·Ä¨ ·Äù·Äò·Ä∫·ÄÜ·Ä≠·ÄØ·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏:</h3>
            <div class="sites-list">
                <div class="site-item">YouTube</div>
                <div class="site-item">Facebook Video</div>
                <div class="site-item">TikTok</div>
                <div class="site-item">Instagram</div>
                <div class="site-item">Twitter/X</div>
                <div class="site-item">Vimeo</div>
                <div class="site-item">Dailymotion</div>
                <div class="site-item">HomieTV</div>
                <div class="site-item">AdsFly</div>
                <div class="site-item">Short.ly</div>
                <div class="site-item">Bit.ly</div>
                <div class="site-item">T.ly</div>
            </div>
        </div>
    </div>

    <script>
        // Common URL shorteners and ad networks
        const adNetworks = [
            'short.ly', 'bit.ly', 't.ly', 'tinyurl.com', 'ow.ly', 'buff.ly',
            'goo.gl', 'is.gd', 'adf.ly', 'linkbucks.com', 'bc.vc', 'ouo.io',
            'sh.st', 'coin-have.com', 'fas.li', 'destyy.com', 'clk.sh',
            'homietv.com', 'adsfly.org'
        ];

        // Video platform patterns
        const videoPatterns = [
            {
                name: 'YouTube',
                patterns: [
                    /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,
                    /youtube\.com.*[?&]v=([a-zA-Z0-9_-]{11})/
                ],
                template: 'https://www.youtube.com/watch?v={id}'
            },
            {
                name: 'Facebook Video',
                patterns: [
                    /facebook\.com.*\/videos?\/(\d+)/,
                    /fb\.watch\/([a-zA-Z0-9_-]+)/
                ],
                template: 'https://www.facebook.com/watch/?v={id}'
            },
            {
                name: 'TikTok',
                patterns: [
                    /tiktok\.com.*\/video\/(\d+)/,
                    /vm\.tiktok\.com\/([a-zA-Z0-9]+)/
                ],
                template: 'https://www.tiktok.com/video/{id}'
            },
            {
                name: 'Instagram',
                patterns: [
                    /instagram\.com\/p\/([a-zA-Z0-9_-]+)/,
                    /instagram\.com\/reel\/([a-zA-Z0-9_-]+)/
                ],
                template: 'https://www.instagram.com/p/{id}/'
            },
            {
                name: 'Twitter/X',
                patterns: [
                    /(?:twitter\.com|x\.com)\/\w+\/status\/(\d+)/
                ],
                template: 'https://x.com/i/status/{id}'
            },
            {
                name: 'Vimeo',
                patterns: [
                    /vimeo\.com\/(\d+)/
                ],
                template: 'https://vimeo.com/{id}'
            },
            {
                name: 'Dailymotion',
                patterns: [
                    /dailymotion\.com\/video\/([a-zA-Z0-9]+)/
                ],
                template: 'https://www.dailymotion.com/video/{id}'
            },
            {
                name: 'HomieTV',
                patterns: [
                    /homietv\.com.*[?&](?:url|link|video|v|target)=([^&]+)/,
                    /homietv\.com\/(?:watch|video|embed)\/([a-zA-Z0-9_-]+)/,
                    /homietv\.com.*\/([a-zA-Z0-9_-]{10,})/
                ],
                template: 'https://www.homietv.com/watch/{id}'
            },
            {
                name: 'AdsFly',
                patterns: [
                    /adsfly\.org.*[?&](?:url|link|video|v|target|destination|goto)=([^&]+)/,
                    /adsfly\.org\/([a-zA-Z0-9_-]{4,})/
                ],
                template: 'https://adsfly.org/{id}'
            }
        ];

        async function decodeVideoLink() {
            const inputUrl = document.getElementById('videoUrl').value.trim();
            
            if (!inputUrl) {
                showError('·ÄÄ·Äª·Ä±·Ä∏·Äá·Ä∞·Ä∏·Äï·Äº·ÄØ·Åç URL ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Åã');
                return;
            }

            if (!isValidUrl(inputUrl)) {
                showError('·Äô·Äæ·Äî·Ä∫·ÄÄ·Äî·Ä∫·Äû·Ä±·Ä¨ URL ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Åã');
                return;
            }

            setLoading(true);
            hideError();
            hideResults();

            try {
                const decodedUrls = await processUrl(inputUrl);
                displayResults(decodedUrls);
            } catch (error) {
                showError('·Äú·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ ·Äñ·Äº·Ä±·Äõ·Äæ·ÄÑ·Ä∫·Ä∏·Äõ·Ä¨·Äê·ÄΩ·ÄÑ·Ä∫ ·Ä°·Äô·Äæ·Ä¨·Ä∏·Äõ·Äæ·Ä≠·Äû·Ää·Ä∫·Åã ·ÄÄ·Äª·Ä±·Ä∏·Äá·Ä∞·Ä∏·Äï·Äº·ÄØ·Åç ·Äë·Äï·Ä∫·Äô·Ä∂·ÄÄ·Äº·Ä≠·ÄØ·Ä∏·ÄÖ·Ä¨·Ä∏·Äï·Ä´·Åã');
                console.error('Decoding error:', error);
            } finally {
                setLoading(false);
            }
        }

        async function processUrl(url) {
            const results = [];
            let currentUrl = url;

            // Step 1: Check if it's already a direct video link
            const directMatch = extractVideoId(currentUrl);
            if (directMatch) {
                results.push({
                    type: 'Direct Video Link',
                    platform: directMatch.platform,
                    url: directMatch.cleanUrl,
                    original: false
                });
            }

            // Step 2: Special handling for HomieTV
            if (currentUrl.includes('homietv.com')) {
                const homieResults = await processHomieTVUrl(currentUrl);
                results.push(...homieResults);
            }

            // Step 2.5: Special handling for AdsFly
            if (currentUrl.includes('adsfly.org')) {
                const adsflyResults = await processAdsFlyUrl(currentUrl);
                results.push(...adsflyResults);
            }

            // Step 3: Try to resolve shortened URLs
            if (isShortUrl(currentUrl)) {
                try {
                    const resolvedUrl = await resolveShortUrl(currentUrl);
                    results.push({
                        type: 'Resolved from Short URL',
                        platform: 'URL Shortener',
                        url: resolvedUrl,
                        original: true
                    });

                    // Check if resolved URL is a video link
                    const resolvedMatch = extractVideoId(resolvedUrl);
                    if (resolvedMatch) {
                        results.push({
                            type: 'Final Video Link',
                            platform: resolvedMatch.platform,
                            url: resolvedMatch.cleanUrl,
                            original: false
                        });
                    }
                } catch (error) {
                    console.warn('Could not resolve short URL:', error);
                }
            }

            // Step 4: Extract video IDs from URL parameters
            const extractedLinks = extractFromUrlParams(currentUrl);
            extractedLinks.forEach(link => {
                results.push({
                    type: 'Extracted from Parameters',
                    platform: link.platform || 'Unknown',
                    url: link.url,
                    original: true
                });
            });

            return results.length > 0 ? results : [{
                type: 'Original URL',
                platform: 'Unknown',
                url: currentUrl,
                original: true
            }];
        }

        async function processHomieTVUrl(url) {
            const results = [];
            
            try {
                const urlObj = new URL(url);
                
                // Check for common parameter names that might contain video URLs
                const videoParams = ['url', 'link', 'video', 'v', 'target', 'destination', 'goto', 'redirect'];
                
                for (const param of videoParams) {
                    const value = urlObj.searchParams.get(param);
                    if (value) {
                        let decodedValue = decodeURIComponent(value);
                        
                        // If it's a valid URL, check if it's a video link
                        if (isValidUrl(decodedValue)) {
                            const videoMatch = extractVideoId(decodedValue);
                            if (videoMatch) {
                                results.push({
                                    type: '·Äô·Ä∞·Äõ·ÄÑ·Ä∫·Ä∏ Video Link (HomieTV ·Äô·Äæ)',
                                    platform: videoMatch.platform,
                                    url: videoMatch.cleanUrl,
                                    original: true
                                });
                            } else {
                                results.push({
                                    type: '·Äõ·Äæ·Ä¨·Äñ·ÄΩ·Ä±·Äê·ÄΩ·Ä±·Ä∑·Äõ·Äæ·Ä≠·Äû·Ä±·Ä¨ Link (HomieTV ·Äô·Äæ)',
                                    platform: 'HomieTV',
                                    url: decodedValue,
                                    original: true
                                });
                            }
                        }
                    }
                }
                
                // If no parameters found, try to extract from path
                if (results.length === 0) {
                    const pathMatch = url.match(/homietv\.com\/(?:watch|video|embed)\/([^/?]+)/);
                    if (pathMatch) {
                        results.push({
                            type: 'HomieTV Video ID',
                            platform: 'HomieTV',
                            url: `https://www.homietv.com/watch/${pathMatch[1]}`,
                            original: false
                        });
                    }
                }
                
            } catch (error) {
                console.warn('Error processing HomieTV URL:', error);
            }
            
            return results;
        }

        async function processAdsFlyUrl(url) {
            const results = [];
            
            try {
                const urlObj = new URL(url);
                
                // Check for common parameter names that might contain video URLs
                const videoParams = ['url', 'link', 'video', 'v', 'target', 'destination', 'goto', 'redirect', 'r'];
                
                for (const param of videoParams) {
                    const value = urlObj.searchParams.get(param);
                    if (value) {
                        let decodedValue = decodeURIComponent(value);
                        
                        // Sometimes URLs are double-encoded
                        try {
                            const doubleDecoded = decodeURIComponent(decodedValue);
                            if (isValidUrl(doubleDecoded)) {
                                decodedValue = doubleDecoded;
                            }
                        } catch (e) {
                            // If double decoding fails, stick with single decode
                        }
                        
                        // If it's a valid URL, check if it's a video link
                        if (isValidUrl(decodedValue)) {
                            const videoMatch = extractVideoId(decodedValue);
                            if (videoMatch) {
                                results.push({
                                    type: '·Äô·Ä∞·Äõ·ÄÑ·Ä∫·Ä∏ Video Link (AdsFly ·Äô·Äæ)',
                                    platform: videoMatch.platform,
                                    url: videoMatch.cleanUrl,
                                    original: true
                                });
                            } else {
                                results.push({
                                    type: '·Äõ·Äæ·Ä¨·Äñ·ÄΩ·Ä±·Äê·ÄΩ·Ä±·Ä∑·Äõ·Äæ·Ä≠·Äû·Ä±·Ä¨ Link (AdsFly ·Äô·Äæ)',
                                    platform: 'AdsFly',
                                    url: decodedValue,
                                    original: true
                                });
                            }
                        }
                    }
                }
                
                // Check for Base64 encoded URLs in parameters
                for (const param of ['data', 'encoded', 'b64']) {
                    const value = urlO
